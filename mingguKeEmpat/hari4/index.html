<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>to-do list list an prioritas</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            padding: 20px; 
            max-width: 800px; 
            margin: 0 auto;
            background-color: #f5f5f5;
        }
        h2 { 
            color: #333; 
            text-align: center;
            margin-bottom: 30px;
        }
        .input-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        #todoInput {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            background-color: white;
        }
        button {
            padding: 10px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #45a049;
        }
        #deleteAllBtn {
            background-color: #f44336;
            margin-bottom: 20px;
        }
        #deleteAllBtn:hover {
            background-color: #d32f2f;
        }
        ul { 
            list-style-type: none; 
            padding: 0;
        }
        li { 
            margin: 10px 0; 
            padding: 15px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.2s;
        }
        li:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        .priority-high {
            background-color: #ffcdd2;
            border-left: 5px solid #f44336;
        }
        .priority-medium {
            background-color: #fff9c4;
            border-left: 5px solid #ffc107;
        }
        .priority-low {
            background-color: #c8e6c9;
            border-left: 5px solid #4CAF50;
        }
        .todo-text {
            flex: 1;
            margin-left: 10px;
        }
        .completed {
            text-decoration: line-through;
            color: #888;
        }
        .todo-date {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }
        .checkbox {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        .delete-btn {
            background-color: transparent;
            border: none;
            color: #f44336;
            cursor: pointer;
            font-size: 18px;
            margin-left: 10px;
        }
        .priority-label {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        .priority-high .priority-label {
            background-color: #f44336;
            color: white;
        }
        .priority-medium .priority-label {
            background-color: #ffc107;
            color: black;
        }
        .priority-low .priority-label {
            background-color: #4CAF50;
            color: white;
        }
    </style>
</head>
<body>
    <h2>To-do list prioritas kita</h2>
    
    <div class="input-container">
        <input type="text" id="todoInput" placeholder="Tambah tugas baru">
        <select id="prioritySelect">
            <option value="high">Tinggi</option>
            <option value="medium" selected>Sedang</option>
            <option value="low">Rendah</option>
        </select>
        <button onclick="tambahTodo()">Tambah</button>
    </div>
    
    <button id="deleteAllBtn" onclick="hapusSemua()">Hapus Semua</button>
    
    <ul id="todoList"></ul>

    <script>
        //memuat data dari localStorage 
        window.onload = function() {
            const todos = JSON.parse(localStorage.getItem("todos")) || [];
            todos.forEach((todo) => tampilkanTodo(todo));
        };

        function tambahTodo() {
            const input = document.getElementById("todoInput");
            const prioritySelect = document.getElementById("prioritySelect");
            const value = input.value.trim();
            const priority = prioritySelect.value;
            
            if (value === "") return;
            
            const now = new Date();
            const dateTime = now.toLocaleString('id-ID', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            
            const todo = {
                id: Date.now(),
                text: value,
                priority: priority,
                completed: false,
                date: dateTime
            };
            
            tampilkanTodo(todo);
            simpanTodo(todo);
            input.value = "";
        }

        function tampilkanTodo(todo) {
            const list = document.getElementById("todoList");
            const item = document.createElement("li");
            item.className = `priority-${todo.priority}`;
            item.setAttribute('data-id', todo.id);
            
            // check buat tanda selesai
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.className = "checkbox";
            checkbox.checked = todo.completed;
            checkbox.onchange = function() {
                toggleComplete(todo.id, checkbox.checked);
            };
            
            // Label prioritas
            const priorityLabel = document.createElement("span");
            priorityLabel.className = "priority-label";
            priorityLabel.textContent = todo.priority === 'high' ? 'Tinggi' : 
                                       todo.priority === 'medium' ? 'Sedang' : 'Rendah';
            
            // Teks tugas
            const todoText = document.createElement("span");
            todoText.className = "todo-text";
            if (todo.completed) {
                todoText.classList.add("completed");
            }
            todoText.textContent = todo.text;
            
            // Tanggal
            const todoDate = document.createElement("div");
            todoDate.className = "todo-date";
            todoDate.textContent = `Ditambahkan: ${todo.date}`;
            
            // Tombol hapus
            const deleteBtn = document.createElement("button");
            deleteBtn.className = "delete-btn";
            deleteBtn.innerHTML = "&times;";
            deleteBtn.onclick = function() {
                hapusTodo(todo.id);
            };
            
            // Container untuk teks dan tanggal
            const textContainer = document.createElement("div");
            textContainer.appendChild(todoText);
            textContainer.appendChild(todoDate);
            
            item.appendChild(checkbox);
            item.appendChild(priorityLabel);
            item.appendChild(textContainer);
            item.appendChild(deleteBtn);
            
            list.appendChild(item);
        }

        function toggleComplete(id, completed) {
            let todos = JSON.parse(localStorage.getItem("todos")) || [];
            const todoIndex = todos.findIndex(todo => todo.id === id);
            
            if (todoIndex !== -1) {
                todos[todoIndex].completed = completed;
                localStorage.setItem("todos", JSON.stringify(todos));
                
                // Perbarui tampilan
                const todoItem = document.querySelector(`li[data-id="${id}"]`);
                const todoText = todoItem.querySelector('.todo-text');
                
                if (completed) {
                    todoText.classList.add("completed");
                } else {
                    todoText.classList.remove("completed");
                }
            }
        }

        function hapusTodo(id) {
            let todos = JSON.parse(localStorage.getItem("todos")) || [];
            todos = todos.filter(todo => todo.id !== id);
            localStorage.setItem("todos", JSON.stringify(todos));
            
            // Hapus dari DOM
            const todoItem = document.querySelector(`li[data-id="${id}"]`);
            if (todoItem) {
                todoItem.remove();
            }
        }

        function hapusSemua() {
            if (confirm("Yakin mau hapus!!????")) {
                localStorage.removeItem("todos");
                document.getElementById("todoList").innerHTML = "";
            }
        }

        function simpanTodo(todo) {
            const todos = JSON.parse(localStorage.getItem("todos")) || [];
            todos.push(todo);
            localStorage.setItem("todos", JSON.stringify(todos));
        }
    </script>
</body>
</html>


